RETURN MACRO
	MOV AH, 4CH
	INT 21H
ENDM

WRITE MACRO VAR
	LEA DX, VAR
	MOV AH, 09H
	INT 21H
ENDM

.MODEL SMALL
.DATA
	ARR DW 1, 4, 9, 16, 25
	N DW ($ - ARR) / 2
	KEY EQU 15
	KEYF DB 'Key was found.', 10, 13, '$'
	KEYNF DB 'Key was not found.', 10, 13, '$'

    
.CODE
	MOV AX, @DATA
	MOV DS, AX
    
	MOV AX, 0
	MOV BX, N
	DEC BX
BINSRC:

	CMP AX, BX
	JG NOTFOUND
	
	MOV CX, BX
	ADD CX, AX
	SAR CX, 1

	MOV SI, CX
	ADD SI, SI	;IN WORD OPERATIONS,  MID POSITION IS TWICE AS EXPECTED

	MOV DX, KEY
	CMP DX, ARR[SI]
	JE FOUND
	JL LEFT
	JG RIGHT

	LEFT:
		SUB CX, 1
		MOV BX, CX
		JMP BINSRC
	RIGHT:
		ADD CX, 1
		MOV AX, CX
		JMP BINSRC
	FOUND:
		WRITE KEYF
		RETURN
		JMP EOF
	NOTFOUND:
		WRITE KEYNF
		RETURN
	EOF: END
